<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D63MJPZ47S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-D63MJPZ47S');
  
<div id="resultCard" class="card">
  ...
</div>
</script>

  <script>
  // EmojiPick GA4 helper
  window.track = function(name, params) {
    try {
      if (typeof gtag === 'function') {
        var p = params || {};
        // 디버그 모드: URL에 ?debug=1 붙이면 DebugView에서 더 잘 보임
        if (location.search.includes('debug=1')) p.debug_mode = true;
        gtag('event', name, p);
      }
    } catch (e) {}
  };
</script>
<!-- 결과 카드 영역 예시 -->
<div id="resultCard" class="card">
  ...
</div>
function yyyymmdd() {
  const d = new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth() + 1).padStart(2, "0");
  const day = String(d.getDate()).padStart(2, "0");
  return `${y}-${m}-${day}`;
}

async function copyAsTicket() {
  const el = document.querySelector("#resultCard");
  if (!el) {
    alert("Ticket capture target (#resultCard) not found.");
    return;
  }

  // 버튼이 화면에서 사라지게(캡처에 버튼이 들어가지 않도록)
  // 필요하면 el 안의 특정 버튼 영역을 잠깐 숨겨도 됩니다.
  const canvas = await html2canvas(el, {
    backgroundColor: "#ffffff",
    scale: 2,
    useCORS: true
  });

  // 1) PNG 다운로드
  canvas.toBlob(async (blob) => {
    if (!blob) return;

    const filename = `EmojiPick-ticket-${yyyymmdd()}.png`;
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);

    // 2) (가능하면) 클립보드에 이미지 복사
    // 크롬/엣지 일부 환경에서만 동작합니다.
    try {
      if (navigator.clipboard && window.ClipboardItem) {
        await navigator.clipboard.write([new ClipboardItem({ "image/png": blob })]);
        // 원하면 토스트/알림 표시
        // alert("Ticket image copied to clipboard!");
      }
    } catch (e) {
      // 클립보드 복사는 환경에 따라 실패가 정상입니다.
      // 다운로드는 이미 완료되었으니 조용히 무시해도 됩니다.
      console.log("Clipboard copy skipped:", e);
    }
  }, "image/png");
}

document.addEventListener("DOMContentLoaded", () => {
  const btn = document.querySelector("#btnCopyTicket");
  if (btn) btn.addEventListener("click", copyAsTicket);
});

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EmojiPick — Lucky Numbers</title>
  <meta name="description" content="Pick emojis, get lucky numbers, and challenge a friend — for entertainment only." />

  <link rel="canonical" href="https://yydnext.github.io/emojipick-pwa/" />

  <!-- Open Graph (share preview) -->
  <meta property="og:title" content="EmojiPick — Lucky Numbers" />
  <meta property="og:description" content="Pick emojis, get lucky numbers, and challenge a friend — for entertainment only." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://yydnext.github.io/emojipick-pwa/" />
  <meta property="og:image" content="https://yydnext.github.io/emojipick-pwa/og.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="EmojiPick — Lucky Numbers" />
  <meta name="twitter:description" content="Pick emojis, get lucky numbers, and challenge a friend — for entertainment only." />
  <meta name="twitter:image" content="https://yydnext.github.io/emojipick-pwa/og.png" />

  <link rel="manifest" href="manifest.webmanifest?v=20260204" />

  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png" />


  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="EmojiPick" />
  <!-- Slightly brighter background so address bar/OS chrome doesn't look "black" -->
  <meta name="theme-color" content="#f6f8ff" />

  <link rel="stylesheet" href="styles.v11.css?v=20260204v01" />
</head>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<body>
  <div class="app">
    <header class="topbar">
        <div class="logo" aria-hidden="true">
          <img src="./icon-192.png" alt="" style="width:28px;height:28px;border-radius:8px;display:block;">
          </div>

        <div>
          <div class="brandName">EmojiPick</div>
          <div class="brandTag">Pick emojis → Get lucky numbers → Share & challenge</div>
        </div>
      </div>

      <div class="row" style="gap:8px; flex-wrap: wrap; justify-content: flex-end;">
        <!-- Real links so navigation works even if a cached JS build is still running -->
        <a id="btnMyPicks" class="linkBtn" href="./mypicks.html">My Picks</a>
        <a id="btnCompare" class="linkBtn" href="./compare.html">Compare</a>
        <button id="btnUpgrade" class="linkBtn" type="button">Upgrade</button>
        <a id="btnParty" class="linkBtn" href="./partymode.html">Party Mode</a>
        <a class="linkBtn" href="./about.html">About</a>
      </div>
    </header>

    <main class="content">
      <section class="card">
        <div class="tabs" role="tablist" aria-label="Game selection">
          <button class="tab" role="tab" id="tab-pb" data-game="pb" aria-selected="true">Powerball</button>
          <button class="tab" role="tab" id="tab-mm" data-game="mm" aria-selected="false">Mega Millions</button>
          <button class="tab" role="tab" id="tab-tx" data-game="tx" aria-selected="false">TX Instant (Demo)</button>
        </div>

        <div class="row between" style="margin-top: 10px;">
          <div>
            <div id="gameTitle" class="h2">Powerball</div>
            <div id="gameRule" class="muted">Pick 5 numbers + 1 Powerball</div>
          </div>
          <div class="pill" id="todayPill"></div>
        </div>

        <div class="divider"></div>

        <div id="modeBanner" class="banner" hidden>
          <div class="bannerTitle">Friend challenge</div>
          <div id="modeText" class="bannerText"></div>
        </div>

        <section id="panelPick" class="panel">
          <div class="row between">
            <div>
              <div class="h3">Pick your emojis</div>
              <div id="pickHint" class="muted">Choose 6 emojis for this game.</div>
            </div>
            <div class="counter"><span id="pickedCount">0</span>/<span id="needCount">6</span></div>
          </div>

          <div class="filters">
            <button class="chip" data-filter="all" aria-pressed="true">All</button>
            <button class="chip" data-filter="lucky" aria-pressed="false">Lucky</button>
            <button class="chip" data-filter="money" aria-pressed="false">Money</button>
            <button class="chip" data-filter="animals" aria-pressed="false">Animals</button>
            <button class="chip" data-filter="nature" aria-pressed="false">Nature</button>
            <button class="chip" data-filter="fun" aria-pressed="false">Fun</button>
          </div>

          <div id="emojiGrid" class="emojiGrid" aria-label="Emoji grid"></div>

          <div class="row gap" style="margin-top: 14px;">
            <button id="btnReset" class="secondary" type="button">Reset</button>
            <button id="btnGenerate" class="primary" type="button" disabled>Generate my numbers</button>
          </div>

          <div class="micro" style="margin-top: 10px;">
            For entertainment only. This page does not sell lottery tickets.
          </div>
        </section>

        <section id="panelResult" class="panel" hidden>
          <div class="row between">
            <div>
              <div class="h3">Your result</div>
              <div id="resultSubtitle" class="muted">Based on your emojis + today’s seed.</div>
            </div>
            <button id="btnBack" class="ghost" type="button">Back</button>
          </div>

          <div class="resultCard" id="resultCard">
            <div class="row between" style="align-items:flex-start;">
              <div>
                <div class="h2" id="resultGame">Powerball</div>
                <div class="muted" id="resultDate">—</div>
              </div>
              <div class="badge" id="resultBadge">Today</div>
            </div>

            <div class="emojiLine" id="resultEmojis"></div>
            <div class="numbers" id="resultNumbers"></div>
            <div class="fortune" id="resultFortune"></div>
          </div>

          <section class="nextCard" id="nextCard" aria-label="Next steps">
            <div class="nextTitle">What next?</div>
            <div class="nextText muted">Make this feel useful (and shareable) in 5 seconds.</div>
            <div class="row gap" style="margin-top: 10px; flex-wrap: wrap;">
              <button id="btnCopyTicket" class="secondary" type="button">Copy as ticket</button>
              <button id="btnMorePicks" class="secondary" type="button">3 more fun picks</button>
              <button id="btnSavePick" class="secondary" type="button">Save</button>
              <button id="btnCalendar" class="secondary" type="button">Check reminder</button>
              <button id="btnExplain" class="ghost" type="button">Why these numbers?</button>
            </div>

            <div id="morePicks" class="morePicks" hidden></div>
          </section>

          <div id="comparePanel" class="compare" hidden>
            <div class="compareTitle">Challenge result</div>
            <div id="compareText" class="compareText"></div>
          </div>

          <div class="row gap" style="margin-top: 14px;">
            <button id="btnShare" class="primary" type="button">Share</button>
            <button id="btnCopy" class="secondary" type="button">Copy link</button>
          </div>

          <div class="row gap" style="margin-top: 10px;">
            <button id="btnChallenge" class="secondary" type="button">Challenge a friend</button>
            <a id="btnPartner" class="partner" href="#" rel="noopener">Play on partner app (coming soon)</a>
          </div>

          <div class="micro" style="margin-top: 10px;">
            Tip: The “partner app” button can be wired to YD deep links later.
          </div>
        </section>
      </section>

      <section class="footerCard">
        <div class="footerTitle">How it works</div>
        <ol class="steps">
          <li>Choose a draw (Powerball / Mega Millions / TX Instant Demo)</li>
          <li>Pick a set of emojis (today’s seed makes it feel fresh)</li>
          <li>Share your card or challenge a friend</li>
        </ol>
      </section>
    </main>

    <footer class="footer">
      <div class="muted">© <span id="year"></span> EmojiPick. Entertainment only. <span id="build"></span></div>
      <div class="footerLinks">
        <a id="btnPrivacy" class="linkBtn" href="./privacy.html">Privacy</a>
        <a id="btnTerms" class="linkBtn" href="./terms.html">Terms</a>
      </div>
    </footer>
  </div><script src="./app.v11.js?v=20260117v17"></script>

</body>
</html>
